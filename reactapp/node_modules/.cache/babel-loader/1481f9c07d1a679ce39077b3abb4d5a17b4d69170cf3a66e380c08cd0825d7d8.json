{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\c8322ba8-8675-480e-88b8-37f182c52f0e-001f5d1b-874c-496f-a944-17dccc4c916a-branch6\\\\reactapp\\\\src\\\\components\\\\PatientAccess.js\",\n  _s = $RefreshSig$();\n// src/components/PatientAccess.js\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport NewPatientModal from \"./NewPatientModal\";\nimport ReviewModal from \"./ReviewModal\";\nimport NotificationPopup from \"./NotificationPopup\";\nimport { Chatbot } from \"./Chatbot\";\nimport { FiUser, FiPlus, FiCalendar, FiEdit, FiTrash2, FiMessageSquare } from 'react-icons/fi';\n\n// Helper component for status badges\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StatusBadge = ({\n  status\n}) => {\n  const statusStyles = {\n    REQUESTED: 'bg-yellow-100 text-yellow-800',\n    APPROVED: 'bg-green-100 text-green-800',\n    COMPLETED: 'bg-blue-100 text-blue-800',\n    CANCELLED: 'bg-red-100 text-red-800',\n    RESCHEDULED: 'bg-purple-100 text-purple-800'\n  };\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: `px-3 py-1 text-xs font-medium rounded-full ${statusStyles[status] || 'bg-gray-100'}`,\n    children: status\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 10\n  }, this);\n};\n_c = StatusBadge;\nconst PatientAccess = () => {\n  _s();\n  const [patients, setPatients] = useState([]);\n  const [selectedPatientId, setSelectedPatientId] = useState(\"\");\n  const [doctors, setDoctors] = useState([]);\n  const [pastAppointments, setPastAppointments] = useState([]);\n  const [futureAppointments, setFutureAppointments] = useState([]);\n  const [showNewForm, setShowNewForm] = useState(false);\n  const [newPatient, setNewPatient] = useState({\n    name: \"\",\n    email: \"\",\n    phoneNumber: \"\",\n    dateOfBirth: \"\"\n  });\n  const [newAppointment, setNewAppointment] = useState({\n    doctorId: \"\",\n    date: \"\",\n    time: \"09:00\",\n    reason: \"\"\n  });\n  const [activeTab, setActiveTab] = useState(\"book\");\n  const [showReviewModal, setShowReviewModal] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [popupMessage, setPopupMessage] = useState(\"\");\n  const [isChatbotOpen, setChatbotOpen] = useState(false);\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        const [pRes, dRes] = await Promise.all([axios.get(\"/api/patients\"), axios.get(\"/api/doctors\")]);\n        setPatients(Array.isArray(pRes.data) ? pRes.data : []);\n        setDoctors(Array.isArray(dRes.data) ? dRes.data : []);\n      } catch (error) {\n        console.error(\"Error loading data:\", error);\n      }\n    };\n    loadData();\n  }, []);\n  useEffect(() => {\n    if (selectedPatientId) {\n      fetchAppointmentsByPatient(selectedPatientId);\n    } else {\n      setPastAppointments([]);\n      setFutureAppointments([]);\n    }\n  }, [selectedPatientId]);\n\n  // --- THIS FUNCTION IS NOW FIXED ---\n  const fetchAppointmentsByPatient = async patientId => {\n    try {\n      const res = await axios.get(`/api/appointments/patient/${patientId}`);\n      const appointmentsData = res.data;\n\n      // CRUCIAL FIX: Check if the response is an array before filtering\n      if (Array.isArray(appointmentsData)) {\n        const now = new Date();\n        // Use the spread operator to avoid direct mutation issues with filter\n        const past = [...appointmentsData].filter(a => new Date(`${a.appointmentDate}T${a.appointmentTime}`) < now);\n        const future = [...appointmentsData].filter(a => new Date(`${a.appointmentDate}T${a.appointmentTime}`) >= now);\n        setPastAppointments(past.sort((a, b) => new Date(`${b.appointmentDate}T${b.appointmentTime}`) - new Date(`${a.appointmentDate}T${a.appointmentTime}`)));\n        setFutureAppointments(future.sort((a, b) => new Date(`${a.appointmentDate}T${a.appointmentTime}`) - new Date(`${b.appointmentDate}T${b.appointmentTime}`)));\n      } else {\n        // If API returns an object (e.g., {message: \"...\"}), reset to empty arrays\n        setPastAppointments([]);\n        setFutureAppointments([]);\n      }\n    } catch (error) {\n      console.error(\"Error fetching appointments:\", error);\n      // Also reset on error to prevent crashes\n      setPastAppointments([]);\n      setFutureAppointments([]);\n    }\n  };\n  const handleCreatePatient = async e => {\n    e.preventDefault();\n    try {\n      await axios.post(\"/api/patients\", newPatient);\n      setShowNewForm(false);\n      setNewPatient({\n        name: \"\",\n        email: \"\",\n        phoneNumber: \"\",\n        dateOfBirth: \"\"\n      });\n      const {\n        data\n      } = await axios.get(\"/api/patients\");\n      setPatients(data || []);\n      setPopupMessage(\"Patient created successfully!\");\n      setShowPopup(true);\n    } catch (error) {\n      setPopupMessage(\"Error creating patient.\");\n      setShowPopup(true);\n    }\n  };\n  const handleCreateAppointment = async e => {\n    e.preventDefault();\n    if (!selectedPatientId) {\n      setPopupMessage(\"Please select a patient first!\");\n      setShowPopup(true);\n      return;\n    }\n    try {\n      await axios.post(\"/api/appointments\", {\n        patientId: parseInt(selectedPatientId),\n        doctorId: parseInt(newAppointment.doctorId),\n        appointmentDate: newAppointment.date,\n        appointmentTime: newAppointment.time,\n        reason: newAppointment.reason\n      });\n      setNewAppointment({\n        doctorId: \"\",\n        date: \"\",\n        time: \"09:00\",\n        reason: \"\"\n      });\n      fetchAppointmentsByPatient(selectedPatientId);\n      setPopupMessage(\"Appointment booked successfully!\");\n      setShowPopup(true);\n      setActiveTab(\"upcoming\");\n    } catch (error) {\n      setPopupMessage(\"Error booking appointment.\");\n      setShowPopup(true);\n    }\n  };\n  const handleCancelAppointment = async appointmentId => {\n    try {\n      await axios.patch(`/api/appointments/${appointmentId}/status`, {\n        status: \"CANCELLED\"\n      });\n      fetchAppointmentsByPatient(selectedPatientId);\n      setPopupMessage(\"Appointment cancelled.\");\n      setShowPopup(true);\n    } catch (error) {\n      setPopupMessage(\"Error cancelling appointment.\");\n      setShowPopup(true);\n    }\n  };\n  const handleReviewSubmit = async reviewData => {\n    try {\n      const appointment = pastAppointments.find(a => a.id === reviewData.appointmentId);\n      await axios.post(\"/api/reviews\", {\n        patientId: parseInt(selectedPatientId),\n        doctorId: appointment.doctor.id,\n        ...reviewData\n      });\n      setShowReviewModal(null);\n      fetchAppointmentsByPatient(selectedPatientId);\n      setPopupMessage(\"Review submitted successfully!\");\n      setShowPopup(true);\n    } catch (error) {\n      setPopupMessage(\"Error submitting review.\");\n      setShowPopup(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-xl shadow-md border flex flex-col md:flex-row items-center justify-between gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 w-full md:w-auto\",\n          children: [/*#__PURE__*/_jsxDEV(FiUser, {\n            className: \"text-purple-600\",\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedPatientId,\n            onChange: e => setSelectedPatientId(e.target.value),\n            className: \"w-full md:w-auto p-3 bg-gray-50 border border-gray-300 rounded-lg text-gray-800 font-semibold focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Patient Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this), patients.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: p.id,\n              children: p.name\n            }, p.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 39\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowNewForm(true),\n          className: \"flex items-center justify-center w-full md:w-auto gap-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition-all\",\n          children: [/*#__PURE__*/_jsxDEV(FiPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), \" New Patient Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), selectedPatientId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-md border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex border-b\",\n          children: ['book', 'upcoming', 'history'].map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab(tab),\n            className: `px-6 py-4 font-semibold text-center transition-colors w-1/3 relative ${activeTab === tab ? 'text-purple-600' : 'text-gray-500 hover:text-purple-500'}`,\n            children: [tab.charAt(0).toUpperCase() + tab.slice(1), activeTab === tab && /*#__PURE__*/_jsxDEV(motion.div, {\n              className: \"absolute bottom-0 left-0 right-0 h-0.5 bg-purple-600\",\n              layoutId: \"underline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 43\n            }, this)]\n          }, tab, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n            mode: \"wait\",\n            children: /*#__PURE__*/_jsxDEV(motion.div, {\n              initial: {\n                y: 10,\n                opacity: 0\n              },\n              animate: {\n                y: 0,\n                opacity: 1\n              },\n              exit: {\n                y: -10,\n                opacity: 0\n              },\n              transition: {\n                duration: 0.2\n              },\n              children: [activeTab === 'book' && /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleCreateAppointment,\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"md:col-span-2 text-2xl font-bold text-gray-900\",\n                  children: \"Request a New Appointment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Doctor\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 30\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"doctorId\",\n                    value: newAppointment.doctorId,\n                    onChange: e => setNewAppointment({\n                      ...newAppointment,\n                      doctorId: e.target.value\n                    }),\n                    className: \"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\",\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select a Doctor\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 324\n                    }, this), doctors.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: d.id,\n                      children: [d.name, \" (\", d.specialization, \")\"]\n                    }, d.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 383\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 108\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Reason for Visit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 30\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"reason\",\n                    value: newAppointment.reason,\n                    onChange: e => setNewAppointment({\n                      ...newAppointment,\n                      reason: e.target.value\n                    }),\n                    className: \"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 118\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 30\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    name: \"date\",\n                    value: newAppointment.date,\n                    onChange: e => setNewAppointment({\n                      ...newAppointment,\n                      date: e.target.value\n                    }),\n                    min: new Date().toISOString().split(\"T\")[0],\n                    className: \"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 106\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 30\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"time\",\n                    name: \"time\",\n                    value: newAppointment.time,\n                    onChange: e => setNewAppointment({\n                      ...newAppointment,\n                      time: e.target.value\n                    }),\n                    className: \"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 106\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"md:col-span-2 text-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition-all\",\n                    children: \"Book Appointment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 67\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 23\n              }, this), (activeTab === 'upcoming' || activeTab === 'history') && /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"space-y-4\",\n                children: [(activeTab === 'upcoming' ? futureAppointments : pastAppointments).map(a => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"bg-gray-50 p-4 rounded-lg border flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-bold text-gray-800\",\n                      children: [\"Dr. \", a.doctor.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm font-normal text-gray-500\",\n                        children: [\"(\", a.doctor.specialization, \")\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 90\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-600 flex items-center gap-2 mt-1\",\n                      children: [/*#__PURE__*/_jsxDEV(FiCalendar, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 97\n                      }, this), \" \", new Date(`${a.appointmentDate}T${a.appointmentTime}`).toLocaleDateString(), \" at \", new Date(`${a.appointmentDate}T${a.appointmentTime}`).toLocaleTimeString([], {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-4 w-full md:w-auto\",\n                    children: [/*#__PURE__*/_jsxDEV(StatusBadge, {\n                      status: a.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 33\n                    }, this), activeTab === 'upcoming' && (a.status === \"REQUESTED\" || a.status === \"APPROVED\") && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleCancelAppointment(a.id),\n                      className: \"text-red-500 hover:text-red-700\",\n                      children: /*#__PURE__*/_jsxDEV(FiTrash2, {\n                        size: 18\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 217\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 119\n                    }, this), activeTab === 'history' && a.status === \"COMPLETED\" && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowReviewModal(a),\n                      className: \"flex items-center gap-1 text-sm font-semibold text-purple-600 hover:text-purple-800\",\n                      children: [/*#__PURE__*/_jsxDEV(FiEdit, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 187,\n                        columnNumber: 231\n                      }, this), \" Review\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 89\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 29\n                  }, this)]\n                }, a.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 27\n                }, this)), activeTab === 'upcoming' && futureAppointments.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-center text-gray-500 py-8\",\n                  children: \"No upcoming appointments.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 91\n                }, this), activeTab === 'history' && pastAppointments.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-center text-gray-500 py-8\",\n                  children: \"No past appointments.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 88\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 23\n              }, this)]\n            }, activeTab, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20 bg-white rounded-xl shadow-md border\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-800\",\n          children: \"Welcome to Your Patient Portal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 83\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 mt-2\",\n          children: \"Please select or create a patient profile to get started.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 167\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this), showNewForm && /*#__PURE__*/_jsxDEV(NewPatientModal, {\n        onClose: () => setShowNewForm(false),\n        onSubmit: handleCreatePatient,\n        newPatient: newPatient,\n        handleChange: e => setNewPatient({\n          ...newPatient,\n          [e.target.name]: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }, this), showReviewModal && /*#__PURE__*/_jsxDEV(ReviewModal, {\n        appointment: showReviewModal,\n        onClose: () => setShowReviewModal(null),\n        onSubmit: handleReviewSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }, this), showPopup && /*#__PURE__*/_jsxDEV(NotificationPopup, {\n        message: popupMessage,\n        type: popupMessage.includes(\"Error\") ? \"error\" : \"success\",\n        onClose: () => setShowPopup(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n      onClick: () => setChatbotOpen(true),\n      className: \"fixed bottom-5 right-5 bg-gradient-to-r from-purple-500 to-pink-500 text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center\",\n      whileHover: {\n        scale: 1.1\n      },\n      whileTap: {\n        scale: 0.9\n      },\n      children: /*#__PURE__*/_jsxDEV(FiMessageSquare, {\n        size: 30\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Chatbot, {\n      isOpen: isChatbotOpen,\n      onClose: () => setChatbotOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(PatientAccess, \"MKa/oMdxw6m5nEW0JIIdkti8/Wk=\");\n_c2 = PatientAccess;\nexport default PatientAccess;\nvar _c, _c2;\n$RefreshReg$(_c, \"StatusBadge\");\n$RefreshReg$(_c2, \"PatientAccess\");","map":{"version":3,"names":["React","useState","useEffect","axios","motion","AnimatePresence","NewPatientModal","ReviewModal","NotificationPopup","Chatbot","FiUser","FiPlus","FiCalendar","FiEdit","FiTrash2","FiMessageSquare","jsxDEV","_jsxDEV","Fragment","_Fragment","StatusBadge","status","statusStyles","REQUESTED","APPROVED","COMPLETED","CANCELLED","RESCHEDULED","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","PatientAccess","_s","patients","setPatients","selectedPatientId","setSelectedPatientId","doctors","setDoctors","pastAppointments","setPastAppointments","futureAppointments","setFutureAppointments","showNewForm","setShowNewForm","newPatient","setNewPatient","name","email","phoneNumber","dateOfBirth","newAppointment","setNewAppointment","doctorId","date","time","reason","activeTab","setActiveTab","showReviewModal","setShowReviewModal","showPopup","setShowPopup","popupMessage","setPopupMessage","isChatbotOpen","setChatbotOpen","loadData","pRes","dRes","Promise","all","get","Array","isArray","data","error","console","fetchAppointmentsByPatient","patientId","res","appointmentsData","now","Date","past","filter","a","appointmentDate","appointmentTime","future","sort","b","handleCreatePatient","e","preventDefault","post","handleCreateAppointment","parseInt","handleCancelAppointment","appointmentId","patch","handleReviewSubmit","reviewData","appointment","find","id","doctor","size","value","onChange","target","map","p","onClick","tab","charAt","toUpperCase","slice","div","layoutId","mode","initial","y","opacity","animate","exit","transition","duration","onSubmit","required","d","specialization","type","min","toISOString","split","toLocaleDateString","toLocaleTimeString","hour","minute","length","onClose","handleChange","message","includes","button","whileHover","scale","whileTap","isOpen","_c2","$RefreshReg$"],"sources":["D:/Projects/c8322ba8-8675-480e-88b8-37f182c52f0e-001f5d1b-874c-496f-a944-17dccc4c916a-branch6/reactapp/src/components/PatientAccess.js"],"sourcesContent":["// src/components/PatientAccess.js\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport NewPatientModal from \"./NewPatientModal\";\nimport ReviewModal from \"./ReviewModal\";\nimport NotificationPopup from \"./NotificationPopup\";\nimport { Chatbot } from \"./Chatbot\";\nimport { FiUser, FiPlus, FiCalendar, FiEdit, FiTrash2, FiMessageSquare } from 'react-icons/fi';\n\n// Helper component for status badges\nconst StatusBadge = ({ status }) => {\n  const statusStyles = {\n    REQUESTED: 'bg-yellow-100 text-yellow-800', APPROVED: 'bg-green-100 text-green-800',\n    COMPLETED: 'bg-blue-100 text-blue-800', CANCELLED: 'bg-red-100 text-red-800',\n    RESCHEDULED: 'bg-purple-100 text-purple-800',\n  };\n  return <span className={`px-3 py-1 text-xs font-medium rounded-full ${statusStyles[status] || 'bg-gray-100'}`}>{status}</span>;\n};\n\nconst PatientAccess = () => {\n  const [patients, setPatients] = useState([]);\n  const [selectedPatientId, setSelectedPatientId] = useState(\"\");\n  const [doctors, setDoctors] = useState([]);\n  const [pastAppointments, setPastAppointments] = useState([]);\n  const [futureAppointments, setFutureAppointments] = useState([]);\n  const [showNewForm, setShowNewForm] = useState(false);\n  const [newPatient, setNewPatient] = useState({ name: \"\", email: \"\", phoneNumber: \"\", dateOfBirth: \"\" });\n  const [newAppointment, setNewAppointment] = useState({ doctorId: \"\", date: \"\", time: \"09:00\", reason: \"\" });\n  const [activeTab, setActiveTab] = useState(\"book\");\n  const [showReviewModal, setShowReviewModal] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [popupMessage, setPopupMessage] = useState(\"\");\n  const [isChatbotOpen, setChatbotOpen] = useState(false);\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        const [pRes, dRes] = await Promise.all([axios.get(\"/api/patients\"), axios.get(\"/api/doctors\")]);\n        setPatients(Array.isArray(pRes.data) ? pRes.data : []);\n        setDoctors(Array.isArray(dRes.data) ? dRes.data : []);\n      } catch (error) { console.error(\"Error loading data:\", error); }\n    };\n    loadData();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatientId) {\n      fetchAppointmentsByPatient(selectedPatientId);\n    } else {\n      setPastAppointments([]);\n      setFutureAppointments([]);\n    }\n  }, [selectedPatientId]);\n\n  // --- THIS FUNCTION IS NOW FIXED ---\n  const fetchAppointmentsByPatient = async (patientId) => {\n    try {\n      const res = await axios.get(`/api/appointments/patient/${patientId}`);\n      const appointmentsData = res.data;\n\n      // CRUCIAL FIX: Check if the response is an array before filtering\n      if (Array.isArray(appointmentsData)) {\n        const now = new Date();\n        // Use the spread operator to avoid direct mutation issues with filter\n        const past = [...appointmentsData].filter(a => new Date(`${a.appointmentDate}T${a.appointmentTime}`) < now);\n        const future = [...appointmentsData].filter(a => new Date(`${a.appointmentDate}T${a.appointmentTime}`) >= now);\n        \n        setPastAppointments(past.sort((a, b) => new Date(`${b.appointmentDate}T${b.appointmentTime}`) - new Date(`${a.appointmentDate}T${a.appointmentTime}`)));\n        setFutureAppointments(future.sort((a, b) => new Date(`${a.appointmentDate}T${a.appointmentTime}`) - new Date(`${b.appointmentDate}T${b.appointmentTime}`)));\n      } else {\n        // If API returns an object (e.g., {message: \"...\"}), reset to empty arrays\n        setPastAppointments([]);\n        setFutureAppointments([]);\n      }\n    } catch (error) {\n      console.error(\"Error fetching appointments:\", error);\n      // Also reset on error to prevent crashes\n      setPastAppointments([]);\n      setFutureAppointments([]);\n    }\n  };\n  \n  const handleCreatePatient = async (e) => {\n    e.preventDefault();\n    try {\n      await axios.post(\"/api/patients\", newPatient);\n      setShowNewForm(false);\n      setNewPatient({ name: \"\", email: \"\", phoneNumber: \"\", dateOfBirth: \"\" });\n      const { data } = await axios.get(\"/api/patients\");\n      setPatients(data || []);\n      setPopupMessage(\"Patient created successfully!\"); setShowPopup(true);\n    } catch (error) { setPopupMessage(\"Error creating patient.\"); setShowPopup(true); }\n  };\n\n  const handleCreateAppointment = async (e) => {\n    e.preventDefault();\n    if (!selectedPatientId) {\n      setPopupMessage(\"Please select a patient first!\"); setShowPopup(true);\n      return;\n    }\n    try {\n      await axios.post(\"/api/appointments\", {\n        patientId: parseInt(selectedPatientId), doctorId: parseInt(newAppointment.doctorId),\n        appointmentDate: newAppointment.date, appointmentTime: newAppointment.time,\n        reason: newAppointment.reason,\n      });\n      setNewAppointment({ doctorId: \"\", date: \"\", time: \"09:00\", reason: \"\" });\n      fetchAppointmentsByPatient(selectedPatientId);\n      setPopupMessage(\"Appointment booked successfully!\"); setShowPopup(true);\n      setActiveTab(\"upcoming\");\n    } catch (error) { setPopupMessage(\"Error booking appointment.\"); setShowPopup(true); }\n  };\n\n  const handleCancelAppointment = async (appointmentId) => {\n    try {\n      await axios.patch(`/api/appointments/${appointmentId}/status`, { status: \"CANCELLED\" });\n      fetchAppointmentsByPatient(selectedPatientId);\n      setPopupMessage(\"Appointment cancelled.\"); setShowPopup(true);\n    } catch (error) { setPopupMessage(\"Error cancelling appointment.\"); setShowPopup(true); }\n  };\n  \n  const handleReviewSubmit = async (reviewData) => {\n    try {\n      const appointment = pastAppointments.find(a => a.id === reviewData.appointmentId);\n      await axios.post(\"/api/reviews\", {\n        patientId: parseInt(selectedPatientId),\n        doctorId: appointment.doctor.id,\n        ...reviewData,\n      });\n      setShowReviewModal(null);\n      fetchAppointmentsByPatient(selectedPatientId);\n      setPopupMessage(\"Review submitted successfully!\"); setShowPopup(true);\n    } catch (error) { setPopupMessage(\"Error submitting review.\"); setShowPopup(true); }\n  };\n\n  return (\n    <>\n      <div className=\"space-y-8\">\n        <div className=\"bg-white p-4 rounded-xl shadow-md border flex flex-col md:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-3 w-full md:w-auto\">\n            <FiUser className=\"text-purple-600\" size={20}/>\n            <select value={selectedPatientId} onChange={(e) => setSelectedPatientId(e.target.value)} className=\"w-full md:w-auto p-3 bg-gray-50 border border-gray-300 rounded-lg text-gray-800 font-semibold focus:outline-none focus:ring-2 focus:ring-purple-500 transition\">\n                <option value=\"\">Select Patient Profile</option>\n                {patients.map((p) => (<option key={p.id} value={p.id}>{p.name}</option>))}\n            </select>\n            </div>\n            <button onClick={() => setShowNewForm(true)} className=\"flex items-center justify-center w-full md:w-auto gap-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition-all\">\n            <FiPlus /> New Patient Profile\n            </button>\n        </div>\n        {selectedPatientId ? (\n            <div className=\"bg-white rounded-xl shadow-md border\">\n            <div className=\"flex border-b\">\n                {['book', 'upcoming', 'history'].map(tab => (\n                  <button key={tab} onClick={() => setActiveTab(tab)} className={`px-6 py-4 font-semibold text-center transition-colors w-1/3 relative ${activeTab === tab ? 'text-purple-600' : 'text-gray-500 hover:text-purple-500'}`}>\n                    {tab.charAt(0).toUpperCase() + tab.slice(1)}\n                    {activeTab === tab && <motion.div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-purple-600\" layoutId=\"underline\" />}\n                  </button>\n                ))}\n            </div>\n            <div className=\"p-6\">\n                <AnimatePresence mode=\"wait\">\n                <motion.div key={activeTab} initial={{ y: 10, opacity: 0 }} animate={{ y: 0, opacity: 1 }} exit={{ y: -10, opacity: 0 }} transition={{ duration: 0.2 }}>\n                    {activeTab === 'book' && (\n                      <form onSubmit={handleCreateAppointment} className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <h2 className=\"md:col-span-2 text-2xl font-bold text-gray-900\">Request a New Appointment</h2>\n                        <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Doctor</label><select name=\"doctorId\" value={newAppointment.doctorId} onChange={(e) => setNewAppointment({...newAppointment, doctorId: e.target.value})} className=\"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\" required><option value=\"\">Select a Doctor</option>{doctors.map(d => <option key={d.id} value={d.id}>{d.name} ({d.specialization})</option>)}</select></div>\n                        <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Reason for Visit</label><input type=\"text\" name=\"reason\" value={newAppointment.reason} onChange={(e) => setNewAppointment({...newAppointment, reason: e.target.value})} className=\"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\" required /></div>\n                        <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label><input type=\"date\" name=\"date\" value={newAppointment.date} onChange={(e) => setNewAppointment({...newAppointment, date: e.target.value})} min={new Date().toISOString().split(\"T\")[0]} className=\"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\" required /></div>\n                        <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Time</label><input type=\"time\" name=\"time\" value={newAppointment.time} onChange={(e) => setNewAppointment({...newAppointment, time: e.target.value})} className=\"w-full p-3 bg-gray-50 border border-gray-300 rounded-lg\" required /></div>\n                        <div className=\"md:col-span-2 text-right\"><button type=\"submit\" className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition-all\">Book Appointment</button></div>\n                      </form>\n                    )}\n                    {(activeTab === 'upcoming' || activeTab === 'history') && (\n                      <ul className=\"space-y-4\">\n                        {(activeTab === 'upcoming' ? futureAppointments : pastAppointments).map(a => (\n                          <li key={a.id} className=\"bg-gray-50 p-4 rounded-lg border flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                            <div className=\"flex-1\">\n                              <p className=\"font-bold text-gray-800\">Dr. {a.doctor.name} <span className=\"text-sm font-normal text-gray-500\">({a.doctor.specialization})</span></p>\n                              <p className=\"text-sm text-gray-600 flex items-center gap-2 mt-1\"><FiCalendar /> {new Date(`${a.appointmentDate}T${a.appointmentTime}`).toLocaleDateString()} at {new Date(`${a.appointmentDate}T${a.appointmentTime}`).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</p>\n                            </div>\n                            <div className=\"flex items-center gap-4 w-full md:w-auto\">\n                                <StatusBadge status={a.status} />\n                                {activeTab === 'upcoming' && (a.status === \"REQUESTED\" || a.status === \"APPROVED\") && <button onClick={() => handleCancelAppointment(a.id)} className=\"text-red-500 hover:text-red-700\"><FiTrash2 size={18}/></button>}\n                                {activeTab === 'history' && a.status === \"COMPLETED\" && <button onClick={() => setShowReviewModal(a)} className=\"flex items-center gap-1 text-sm font-semibold text-purple-600 hover:text-purple-800\"><FiEdit/> Review</button>}\n                            </div>\n                          </li>\n                        ))}\n                        {(activeTab === 'upcoming' && futureAppointments.length === 0) && <p className=\"text-center text-gray-500 py-8\">No upcoming appointments.</p>}\n                        {(activeTab === 'history' && pastAppointments.length === 0) && <p className=\"text-center text-gray-500 py-8\">No past appointments.</p>}\n                      </ul>\n                    )}\n                </motion.div>\n                </AnimatePresence>\n            </div>\n            </div>\n        ) : (\n          <div className=\"text-center py-20 bg-white rounded-xl shadow-md border\"><h2 className=\"text-2xl font-bold text-gray-800\">Welcome to Your Patient Portal</h2><p className=\"text-gray-500 mt-2\">Please select or create a patient profile to get started.</p></div>\n        )}\n        \n        {showNewForm && <NewPatientModal onClose={() => setShowNewForm(false)} onSubmit={handleCreatePatient} newPatient={newPatient} handleChange={(e) => setNewPatient({ ...newPatient, [e.target.name]: e.target.value })} />}\n        {showReviewModal && <ReviewModal appointment={showReviewModal} onClose={() => setShowReviewModal(null)} onSubmit={handleReviewSubmit} />}\n        {showPopup && <NotificationPopup message={popupMessage} type={popupMessage.includes(\"Error\") ? \"error\" : \"success\"} onClose={() => setShowPopup(false)} />}\n      </div>\n\n      <motion.button onClick={() => setChatbotOpen(true)} className=\"fixed bottom-5 right-5 bg-gradient-to-r from-purple-500 to-pink-500 text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center\" whileHover={{ scale: 1.1 }} whileTap={{ scale: 0.9 }}>\n        <FiMessageSquare size={30} />\n      </motion.button>\n      \n      <Chatbot isOpen={isChatbotOpen} onClose={() => setChatbotOpen(false)} />\n    </>\n  );\n};\n\nexport default PatientAccess;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}